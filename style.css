/* --- RESET ROBUSTO --- */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html, body { height: 100%; margin: 0; padding: 0; overflow-x: hidden; }

/* --- PALETA DE CORES INFRACOMMERCE --- */
:root { 
    --bg-body: #1a1625; 
    --bg-card: #2a2435; 
    --text-main: #FFFFFF; 
    --text-muted: #b8a7d1; 
    --text-accent: #d4c3f0; 
    --border-color: #3d3447; 
    --brand-accent: #4a3b5c; 
    --brand-blue: #5e4d7a; 
    --success: #6dd47e; 
    --warning: #f4a261; 
    --danger: #e76f51; 
}

body.light-mode { 
    --bg-body: #f5f0fa; 
    --bg-card: #FFFFFF; 
    --text-main: #2a1e3e; 
    --text-muted: #6b5883; 
    --text-accent: #4a3b5c; 
    --border-color: #e0d5ed; 
    --brand-accent: #4a3b5c; 
    --brand-blue: #5e4d7a;
    --success: #4caf50; 
    --warning: #f4a261;
}

body { font-family: 'Montserrat', sans-serif; background-color: var(--bg-body); color: var(--text-main); font-size: 14px; transition: background-color 0.3s, color 0.3s; }
.container { max-width: 1400px; margin: 0 auto; padding: 20px; width: 100%; }

/* UTILS COLORS */
.text-success { color: var(--success) !important; }
.text-warning { color: var(--warning) !important; }
.text-danger { color: var(--danger) !important; }
.text-normal { color: var(--text-main) !important; }
.bg-success-light { background-color: rgba(109, 212, 126, 0.15); color: var(--success); }
.bg-danger-light { background-color: rgba(231, 111, 81, 0.15); color: var(--danger); }
.bg-warning-light { background-color: rgba(244, 162, 97, 0.15); color: var(--warning); }
.bg-info-light { background-color: rgba(94, 77, 122, 0.15); color: var(--brand-blue); }

/* KPI CARDS VIVOS */
.kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 25px; }
.kpi-card { 
    background: var(--bg-card); padding: 20px; border-radius: 12px; 
    border: 1px solid var(--border-color); box-shadow: 0 2px 8px rgba(0,0,0,0.05); 
    display: flex; flex-direction: column; justify-content: space-between; min-height: 150px;
    transition: background-color 0.3s;
}
.kpi-header-row { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 5px; }
.kpi-title { color: var(--text-muted); font-size: 0.8rem; text-transform: uppercase; font-weight: 700; } 
.kpi-icon-status { font-size: 1.4rem; }
.kpi-value { font-size: 2.2rem; font-weight: 800; color: var(--text-main); margin: 5px 0; } 
.kpi-badge { display: inline-flex; align-items: center; gap: 5px; padding: 4px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 700; width: fit-content; margin-bottom: 10px; }
.kpi-mom { font-size: 0.75rem; color: var(--text-muted); font-weight: 500; border-top: 1px solid var(--border-color); padding-top: 10px; margin-top: auto; }

/* INSIGHT CARDS */
.insight-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; padding: 5px 0; }
.insight-card { 
    border-left: 4px solid transparent; 
    background: var(--bg-card); 
    padding: 0; 
    box-shadow: 0 4px 15px rgba(0,0,0,0.05); 
    border-radius: 12px; 
    border: 1px solid var(--border-color);
    display: flex; 
    flex-direction: column; 
    overflow: hidden; 
    min-height: 220px;
}
.ic-header-modern { display: flex; align-items: center; gap: 15px; padding: 20px 20px 15px 20px; }
.ic-avatar { width: 45px; height: 45px; border-radius: 50%; background: var(--bg-body); display: flex; align-items: center; justify-content: center; font-size: 1.2rem; border: 1px solid var(--border-color); }
.ic-info h4 { margin: 0; font-size: 1rem; color: var(--text-main); font-weight: 700; }
.ic-info span { font-size: 0.8rem; color: var(--text-muted); }
.ic-blocks-row { display: flex; flex: 1; width: 100%; gap: 0; border-top: 1px solid var(--border-color); }
.ic-block { flex: 1; padding: 15px; font-size: 0.8rem; display: flex; flex-direction: column; gap: 8px; border-radius: 0; }
.ic-block:first-child { border-right: 1px solid rgba(0,0,0,0.05); }
.ic-block-title { font-weight: 700; display: flex; align-items: center; gap: 6px; font-size: 0.75rem; text-transform: uppercase; }

/* PILLS DE STATUS (Com Cursor de Ajuda) */
.status-pill { padding: 4px 12px; border-radius: 12px; font-size: 0.75rem; font-weight: 700; display: inline-block; text-align: center; min-width: 90px; cursor: help; }
.pill-success { background-color: rgba(109, 212, 126, 0.15); color: var(--success); }
.pill-warning { background-color: rgba(244, 162, 97, 0.15); color: #f4a261; }
.pill-info { background-color: rgba(94, 77, 122, 0.15); color: var(--brand-blue); }
.pill-neutral { background-color: rgba(158, 158, 158, 0.15); color: var(--text-muted); }
.pill-danger { background-color: rgba(231, 111, 81, 0.15); color: var(--danger); }
.pill-gray { background-color: rgba(158, 158, 158, 0.15); color: var(--text-muted); }
.clickable-cell { cursor: pointer; text-decoration: underline; text-decoration-style: dotted; text-underline-offset: 4px; transition: color 0.2s; }
.clickable-cell:hover { color: var(--brand-blue); font-weight: 800; }

/* LAYOUT GERAL */
header { background-color: var(--bg-card); padding: 15px 20px; border-radius: 12px; margin-bottom: 20px; border-left: 5px solid var(--brand-accent); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); transition: background-color 0.3s; }
.header-brand { display: flex; align-items: center; gap: 15px; } 
.header-brand img { height: 60px; width: auto; border-radius: 4px; }
.header-title h1 { margin: 0; font-size: 1.2rem; font-weight: 800; text-transform: uppercase; color: var(--text-main); } 
.header-title p { margin: 2px 0 0; color: var(--text-muted); font-size: 0.75rem; font-weight: 600; }
.header-controls-wrapper { display: flex; flex-direction: column; align-items: flex-end; gap: 5px; }
.header-actions { display: flex; gap: 8px; }
.btn-action { background-color: var(--brand-blue); color: white; border: none; padding: 8px 16px; border-radius: 6px; font-weight: 600; cursor: pointer; transition: transform 0.2s; display: flex; align-items: center; justify-content: center; gap: 6px; font-size: 0.85rem; white-space: nowrap; }
.btn-action:hover { opacity: 0.9; transform: translateY(-2px); }
.btn-theme { background-color: transparent; border: 1px solid var(--border-color); color: var(--text-main); } .btn-export { background-color: #4caf50; } #csvInput { display: none; }
#statusLog { background: #d1e7dd; color: #0f5132; padding: 10px; border-radius: 6px; margin-bottom: 15px; font-size: 0.85rem; border: 1px solid #badbcc; display: none; text-align: center; }

/* TABS & GR√ÅFICOS */
.tab-nav { display: flex; background-color: var(--bg-card); padding: 0 5px; border-radius: 12px 12px 0 0; margin-bottom: 2px; overflow-x: auto; border-bottom: 1px solid var(--border-color); scrollbar-width: none; transition: background-color 0.3s; }
.tab-nav::-webkit-scrollbar { display: none; }
.tab-button { padding: 15px 20px; border: none; background: none; cursor: pointer; font-size: 0.9rem; color: var(--text-muted); font-weight: 600; transition: color 0.3s; border-bottom: 3px solid transparent; white-space: nowrap; flex-shrink: 0; }
.tab-button.active { color: var(--text-main); border-bottom: 3px solid var(--brand-accent); }
.tab-content { display: none; padding-top: 15px; animation: fadeIn 0.3s ease; } .tab-content.active { display: block; }

.charts-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 30px; }
.single-col { grid-template-columns: 1fr; } .full-width { grid-column: 1 / -1; }
.chart-container { background: var(--bg-card); padding: 15px; border-radius: 12px; border: 1px solid var(--border-color); position: relative; width: 100%; box-shadow: 0 2px 10px rgba(0,0,0,0.05); height: auto; transition: background-color 0.3s; }
.chart-wrapper-inner { position: relative; width: 100%; height: 350px; }
.chart-header { margin-bottom: 10px; padding-bottom: 8px; border-bottom: 1px solid var(--border-color); font-weight: 700; color: var(--text-accent); display: flex; justify-content: space-between; align-items: center; font-size: 1rem; }
.btn-expand { background: transparent; border: none; color: var(--text-muted); cursor: pointer; font-size: 1.3rem; padding: 0 5px; } .btn-expand:hover { color: var(--text-main); }

/* CONTROLES E TABELAS */
.controls { display: flex; gap: 15px; margin-bottom: 20px; background: var(--bg-card); padding: 15px; border-radius: 12px; border: 1px solid var(--border-color); flex-wrap: wrap; transition: background-color 0.3s; } .control-group { display: flex; flex-direction: column; gap: 6px; flex: 1; min-width: 150px; }
label { color: var(--text-muted); font-weight: 600; font-size: 0.8rem; }
select { padding: 10px; border: 1px solid var(--border-color); border-radius: 6px; color: var(--text-main); background: var(--bg-body); width: 100%; outline: none; font-weight: 500; }
.perf-container { background: var(--bg-card); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color); margin-bottom: 25px; transition: background-color 0.3s; }
.perf-header { font-weight: 700; color: var(--text-accent); margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
.perf-table-wrapper { overflow-x: auto; -webkit-overflow-scrolling: touch; }
table.perf-table { width: 100%; border-collapse: collapse; min-width: 500px; }
table.perf-table th { text-align: left; padding: 12px; border-bottom: 2px solid var(--border-color); color: var(--text-muted); font-size: 0.8rem; text-transform: uppercase; } 
table.perf-table td { padding: 12px; border-bottom: 1px solid var(--border-color); color: var(--text-main); font-size: 0.9rem; font-weight: 500; }
.footer { text-align: center; padding: 30px; color: var(--text-muted); font-size: 0.8rem; border-top: 1px solid var(--border-color); margin-top: 20px; }

/* RESPONSIVO */
@media (max-width: 900px) {
    .container { padding: 10px; }
    header { flex-direction: column; align-items: stretch; gap: 15px; padding: 15px; }
    .header-brand { justify-content: center; width: 100%; }
    .header-controls-wrapper { width: 100%; }
    .header-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; width: 100%; }
    .btn-action { width: 100%; }
    .charts-grid { grid-template-columns: 100%; gap: 15px; }
    .chart-wrapper-inner { height: 260px; } 
    .kpi-grid { grid-template-columns: 1fr; }
    .fs-content { width: 100%; height: 100%; border-radius: 0; padding: 10px; }
    .fs-logo { height: 25px; bottom: 10px; right: 10px; opacity: 0.6; }
    .fs-nav-btn { padding: 15px; font-size: 1.5rem; background: rgba(0,0,0,0.3); }
    .insight-grid { grid-template-columns: 1fr; }
}

/* MODAIS */
.fs-modal { display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; background-color: var(--bg-body); flex-direction: column; justify-content: center; align-items: center; } 
.fs-modal.open { display: flex; }
.fs-content { width: 95%; height: 90vh; background: var(--bg-card); border-radius: 12px; padding: 20px; border: 1px solid var(--border-color); display: flex; flex-direction: column; position: relative; }
.fs-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; color: var(--text-accent); font-weight: 700; font-size: 1.2rem; flex-shrink: 0; }
.fs-close-btn { background: none; border: none; color: var(--text-main); font-size: 2rem; cursor: pointer; padding: 0 10px; }
.fs-canvas-wrapper { flex: 1; min-height: 0; position: relative; width: 100%; overflow: hidden; }
.fs-table-container { flex: 1; min-height: 0; overflow-y: auto; width: 100%; display: none; padding-right: 5px; } 
.fs-table-container.active { display: block; }
.fs-table-container table { width: 100%; font-size: 1rem; } .fs-table-container th { padding: 10px; background: var(--bg-card); position: sticky; top: 0; z-index: 2; } .fs-table-container td { padding: 10px; }
.fs-nav-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; padding: 20px; font-size: 2rem; cursor: pointer; border-radius: 50%; z-index: 10000; } .fs-nav-btn:hover { background: var(--brand-accent); } .fs-prev { left: 20px; } .fs-next { right: 20px; }
.fs-footer-msg { margin-top: 10px; text-align: center; color: var(--warning); font-weight: 600; opacity: 0; transition: opacity 0.3s; flex-shrink: 0; font-size: 0.9rem; } .fs-footer-msg.visible { opacity: 1; }
.fs-logo { position: absolute; bottom: 20px; right: 20px; height: 80px; width: auto; z-index: 10001; opacity: 0.8; pointer-events: none; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
.pagination-controls { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; background-color: var(--bg-body); border-bottom: 1px solid var(--border-color); margin-bottom: 10px; border-radius: 6px; }
#pageInfo { font-weight: 600; color: var(--text-muted); font-size: 0.9rem; }
.btn-page { background-color: var(--brand-blue); color: white; border: none; padding: 8px 16px; border-radius: 4px; font-weight: 600; cursor: pointer; font-size: 0.85rem; transition: opacity 0.2s; }
.btn-page:disabled { background-color: var(--border-color); color: var(--text-muted); cursor: not-allowed; opacity: 0.7; }
.btn-page:hover:not(:disabled) { opacity: 0.9; }